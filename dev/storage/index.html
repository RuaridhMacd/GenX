<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Storage · GenX</title><link rel="canonical" href="https://genxproject.github.io/GenX/storage/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">GenX</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Welcome Page</a></li><li><span class="tocitem">Model Concept and Overview</span><ul><li><a class="tocitem" href="../model_introduction/">Model Introduction</a></li><li><a class="tocitem" href="../model_notation/">Notation</a></li><li><a class="tocitem" href="../objective_function/">Objective Function</a></li><li><a class="tocitem" href="../power_balance/">Power Balance</a></li></ul></li><li><span class="tocitem">Model Function Reference</span><ul><li><a class="tocitem" href="../core/">Core</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox" checked/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Resources</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../curtailable_variable_renewable/">Curtailable Variable Renewable</a></li><li><a class="tocitem" href="../flexible_demand/">Flexible Demand</a></li><li><a class="tocitem" href="../hydro_res/">Hydro</a></li><li><a class="tocitem" href="../must_run/">Must Run</a></li><li class="is-active"><a class="tocitem" href>Storage</a><ul class="internal"><li><a class="tocitem" href="#Investment-Charge-1"><span>Investment Charge</span></a></li><li><a class="tocitem" href="#Investment-Energy-1"><span>Investment Energy</span></a></li><li><a class="tocitem" href="#Long-Duration-Storage-1"><span>Long Duration Storage</span></a></li><li><a class="tocitem" href="#Storage-All-1"><span>Storage All</span></a></li><li><a class="tocitem" href="#Storage-Asymmetric-1"><span>Storage Asymmetric</span></a></li><li><a class="tocitem" href="#Storage-Symmetric-1"><span>Storage Symmetric</span></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2-6" type="checkbox"/><label class="tocitem" for="menuitem-3-2-6"><span class="docs-label">Thermal</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../thermal/">Thermal</a></li><li><a class="tocitem" href="../thermal_commit/">Thermal Commit</a></li><li><a class="tocitem" href="../thermal_no_commit/">Thermal No Commit</a></li></ul></li></ul></li><li><a class="tocitem" href="../policies/">Policies</a></li></ul></li><li><a class="tocitem" href="../methods/">Methods</a></li><li><a class="tocitem" href="../solver_configuration/">Solver Configurations</a></li><li><a class="tocitem" href="../solve_model/">Solving the Model</a></li><li><a class="tocitem" href="../additional_features/">Additional Features</a></li><li><a class="tocitem" href="../data_documentation/">Model Inputs/Outputs Documentation</a></li><li><a class="tocitem" href="../load_inputs/">GenX Inputs</a></li><li><a class="tocitem" href="../write_outputs/">GenX Outputs</a></li><li><a class="tocitem" href="../unit_testing/">Unit Testing (Under Development)</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Model Function Reference</a></li><li><a class="is-disabled">Resources</a></li><li class="is-active"><a href>Storage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Storage</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/GenXProject/GenX/blob/master/docs/src/storage.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Storage-1"><a class="docs-heading-anchor" href="#Storage-1">Storage</a><a class="docs-heading-anchor-permalink" href="#Storage-1" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="GenX.long_duration_storage-Tuple{JuMP.Model,Dict}" href="#GenX.long_duration_storage-Tuple{JuMP.Model,Dict}"><code>GenX.long_duration_storage</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">long_duration_storage(EP::Model, inputs::Dict)</code></pre><p>This function creates variables and constraints enabling modeling of long duration storage resources when modeling representative time periods.</p><p><strong>Storage inventory balance at beginning of each representative period</strong></p><p>The constraints in this section are used to approximate the behavior of long-duration energy storage technologies when approximating annual grid operations by modeling operations over representative periods. Previously, the state of charge balance for storage (as defined in <code>storage_all()</code>) assumed that state of charge at the beginning and end of each representative period has to be the same. In other words, the amount of energy built up or consumed by storage technology <span>$o$</span> in zone <span>$z$</span> over the representative period <span>$m$</span>, <span>$\Delta Q_{o,z,m} = 0$</span>. This assumption implicitly excludes the possibility of transferring energy from one representative period to the other which could be cost-optimal when the capital cost of energy storage capacity is relatively small. To model long-duration energy storage using representative periods, we replace the state of charge equation, such that the first term on the right hand side accounts for change in storage inventory associated with representative period <span>$m$</span> (<span>$\Delta Q_{o,z,m}$</span>), which could be positive (net accumulation) or negative (net reduction).</p><div>\[\begin{aligned}
&amp; \Gamma_{o,z,(m-1)\times \tau^{period}+1 } =\left(1-\eta_{o,z}^{loss}\right)\times \left(\Gamma_{o,z,m\times \tau^{period}} -\Delta Q_{o,z,m}\right) -  \\
&amp; \frac{1}{\eta_{o,z}^{discharge}}\Theta_{o,z,(m-1)\times \tau^{period}+1} + \eta_{o,z}^{charge}\Pi_{o,z,(m-1)\times \tau^{period}+1} \quad \forall o \in \mathcal{O}^{LDES}, z \in \mathcal{Z}, m \in \mathcal{M}
\end{aligned}\]</div><p>By definition <span>$\mathcal{T}^{start}=\{\left(m-1\right) \times \tau^{period}+1 | m \in \mathcal{M}\}$</span>, which implies that this constraint is defined for all values of <span>$t \in T^{start}$</span>.</p><p><strong>Storage inventory change input periods</strong></p><p>We need additional variables and constraints to approximate energy exchange between representative periods, while accounting for their chronological occurence in the original input time series data and the possibility that two representative periods may not be adjacent to each other (Fig. \ref{fig:LDESmodel}). To implement this, we introduce a new variable <span>$Q_{o,z, n}$</span> that models inventory of storage technology <span>$o \in O$</span> in zone <span>$z$</span> in each input period <span>$n \in \mathcal{N}$</span>. Additionally we define a function mapping, <span>$f: n \rightarrow m$</span>, that uniquely maps each input period <span>$n$</span> to its corresponding representative period <span>$m$</span>. This mapping is available as an output of the process used to identify representative periods (E.g. k-means clustering \cite{Mallapragada2018}).</p><p><img src="../assets/LDES_approach.png" alt="Modeling inter-period energy exchange via long-duration storage when using representative period temporal resolution to approximate annual grid operations"/> <em>Figure. Modeling inter-period energy exchange via long-duration storage when using representative period temporal resolution to approximate annual grid operations</em></p><p>The following two equations define the storage inventory at the beginning of each input period <span>$n+1$</span> as the sum of storage inventory at begining of previous input period <span>$n$</span> plus change in storage inventory for that period. The latter is approximated by the change in storage inventory in the corresponding representative period, identified per the mapping <span>$f(n)$</span>.  The second constraint relates the storage level of the last input period, <span>$|N|$</span>, with the storage level at the beginning of the first input period. Finally, if the input period is also a representative period, then a third constraint enforces that initial storage level estimated by the intra-period storage balance constraint should equal the initial storage level estimated from the inter-period storage balance constraints.</p><p>%note that <span>$|N|$</span> refers to the last modeled period. Here,</p><div>\[\begin{aligned}
&amp; Q_{o,z,n+1} = Q_{o,z,n} + \Delta Q_{o,z,f(n)}
\quad \forall  o \in \mathcal{O}^{LDES}, z \in \mathcal{Z}, n \in \mathcal{N}\setminus\{|N|\}
\end{aligned}\]</div><div>\[\begin{aligned}
&amp; Q_{o,z,1} = Q_{o,z,|N|} + \Delta Q_{o,z,f(|N|)}
\quad \forall  o \in \mathcal{O}^{LDES}, z \in \mathcal{Z}, n = |N|
\end{aligned}\]</div><div>\[\begin{aligned}
&amp; Q_{o,z,n} =\Gamma_{o,z,f(n)\times \tau^{period}} - \Delta Q_{o,z,m}
\quad \forall  o \in \mathcal{O}^{LDES}, z \in \mathcal{Z}, n \in   \mathcal{N}^{rep},
\end{aligned}\]</div><p>Finally, the next constraint enforces that the initial storage level for each input period <span>$n$</span> must be less than the installed energy capacity limit. This constraint ensures that installed energy storage capacity is consistent with the state of charge during both the operational time periods <span>$t$</span> during each sample period <span>$m$</span> as well as at the start of each chronologically ordered input period <span>$n$</span> in the full annual time series.</p><div>\[\begin{aligned}
    Q_{o,z,n} \leq \Delta^{total, energy}_{o,z}
\quad \forall n \in \mathcal{N}, o \in \mathcal{O}^{LDES}
\end{aligned}\]</div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d7364927a923e2845588ac2e93d130acc5fe9cd0/src/model/resources/storage/long_duration_storage.jl#L17-L74">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GenX.storage-Tuple{JuMP.Model,Dict,Int64,Int64,Int64}" href="#GenX.storage-Tuple{JuMP.Model,Dict,Int64,Int64,Int64}"><code>GenX.storage</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">storage(EP::Model, inputs::Dict, Reserves::Int, OperationWrapping::Int, LongDurationStorage::Int)</code></pre><p>A wide range of energy storage devices (all <span>$o \in \mathcal{O}$</span>) can be modeled in GenX, using one of two generic storage formulations: (1) storage technologies with symmetric charge and discharge capacity (all <span>$o \in \mathcal{O}^{sym}$</span>), such as Lithium-ion batteries and most other electrochemical storage devices that use the same components for both charge and discharge; and (2) storage technologies that employ distinct and potentially asymmetric charge and discharge capacities (all <span>$o \in \mathcal{O}^{asym}$</span>), such as most thermal storage technologies or hydrogen electrolysis/storage/fuel cell or combustion turbine systems.</p><p><strong>Storage with symmetric charge and discharge capacity</strong></p><p>For storage technologies with symmetric charge and discharge capacity (all <span>$o \in \mathcal{O}^{sym}$</span>), charge rate, <span>$\Pi_{o,z,t}$</span>, is constrained by the total installed power capacity, <span>$\Omega_{o,z}$</span>. Since storage resources generally represent a `cluster&#39; of multiple similar storage devices of the same type/cost in the same zone, GenX permits storage resources to simultaneously charge and discharge (as some units could be charging while others discharge), with the simultaenous sum of charge, <span>$\Pi_{o,z,t}$</span>, and discharge, <span>$\Theta_{o,z,t}$</span>, also limited by the total installed power capacity, <span>$\Delta^{total}_{o,z}$</span>. These two constraints are as follows:</p><div>\[\begin{aligned}
	&amp;  \Pi_{o,z,t} \leq \Delta^{total}_{o,z} &amp; \quad \forall o \in \mathcal{O}^{sym}, z \in \mathcal{Z}, t \in \mathcal{T}\\
	&amp;  \Pi_{o,z,t} + \Theta_{o,z,t} \leq \Delta^{total}_{o,z} &amp; \quad \forall o \in \mathcal{O}^{sym}, z \in \mathcal{Z}, t \in \mathcal{T}
\end{aligned}\]</div><p>These constraints are created with the function <code>storage_symmetric()</code> in <code>storage_symmetric.jl</code>.</p><p>If reserves are modeled, the following two constraints replace those above:</p><div>\[\begin{aligned}
&amp;  \Pi_{o,z,t} + f^{charge}_{o,z,t} \leq \Delta^{total}_{o,z} &amp; \quad \forall o \in \mathcal{O}^{sym}, z \in \mathcal{Z}, t \in \mathcal{T}\\
&amp;  \Pi_{o,z,t} + f^{charge}_{o,z,t} + \Theta_{o,z,t} + f^{discharge}_{o,z,t} + r^{discharge}_{o,z,t} \leq \Delta^{total}_{o,z} &amp; \quad \forall o \in \mathcal{O}^{sym}, z \in \mathcal{Z}, t \in \mathcal{T} \\
\end{aligned}\]</div><p>where <span>$f^{charge}_{o,z,t}$</span> is the contribution of storage resources to frequency regulation while charging, <span>$f^{discharge}_{o,z,t}$</span> is the contribution of storage resources to frequency regulation while discharging, and <span>$r^{discharge}_{o,z,t}$</span> is the contribution of storage resources to upward reserves while discharging. Note that as storage resources can contribute to regulation and reserves while either charging or discharging, the proxy variables <span>$f^{charge}_{o,z,t}, f^{discharge}_{o,z,t}$</span> and <span>$r^{charge}_{o,z,t}, r^{discharge}_{o,z,t}$</span> are created for storage resources where the total contribution to regulation and reserves, <span>$f_{o,z,t}, r_{o,z,t}$</span> is the sum of the proxy variables.</p><p>These constraints are created with the function <code>storage_symmetric_reserves()</code> in <code>storage_symmetric.jl</code>.</p><p><strong>Storage with asymmetric charge and discharge capacity</strong></p><p>For storage technologies with asymmetric charge and discharge capacities (all <span>$o \in \mathcal{O}^{asym}$</span>), charge rate, <span>$\Pi_{o,z,t}$</span>, is constrained by the total installed charge capacity, <span>$\Delta^{total, charge}_{o,z}$</span>, as follows:</p><div>\[\begin{aligned}
	&amp;  \Pi_{o,z,t} \leq \Delta^{total, charge}_{o,z} &amp; \quad \forall o \in \mathcal{O}^{asym}, z \in \mathcal{Z}, t \in \mathcal{T}
\end{aligned}\]</div><p>These constraints are created with the function <code>storage_asymmetric()</code> in <code>storage_asymmetric.jl</code>.</p><p>If reserves are modeled, the above constraint is replaced by the following:</p><div>\[\begin{aligned}
	&amp;  \Pi_{o,z,t} + f^{charge}_{o,z,t} \leq \Delta^{total, charge}_{o,z} &amp; \quad \forall o \in \mathcal{O}^{asym}, z \in \mathcal{Z}, t \in \mathcal{T}
\end{aligned}\]</div><p>where <span>$f^{+}_{y=o,z,t}$</span> is the contribution of storage resources to frequency regulation while charging.</p><p>These constraints are created with the function <code>storage_asymmetric_reserves()</code> in <code>storage_asymmetric.jl</code>.</p><p><strong>All storage resources</strong></p><p>The following constraints apply to all storage resources, <span>$o \in \mathcal{O}$</span>, regardless of whether the charge/discharge capacities are symmetric or asymmetric.</p><p>The following two constraints track the state of charge of the storage resources at the end of each time period, relating the volume of energy stored at the end of the time period, <span>$\Gamma_{o,z,t}$</span>, to the state of charge at the end of the prior time period, <span>$\Gamma_{o,z,t-1}$</span>, the charge and discharge decisions in the current time period, <span>$\Pi_{o,z,t}, \Theta_{o,z,t}$</span>, and the self discharge rate for the storage resource (if any), <span>$\eta_{o,z}^{loss}$</span>.  The first of these two constraints enforces storage inventory balance for interior time steps <span>$(t \in \mathcal{T}^{interior})$</span>, while the second enforces storage balance constraint for the initial time step <span>$(t \in \mathcal{T}^{start})$</span>.</p><div>\[\begin{aligned}
	&amp;  \Gamma_{o,z,t} =\Gamma_{o,z,t-1} - \frac{1}{\eta_{o,z}^{discharge}}\Theta_{o,z,t} + \eta_{o,z}^{charge}\Pi_{o,z,t} - \eta_{o,z}^{loss}\Gamma_{o,z,t-1}  &amp; \forall o \in \mathcal{O}, z \in \mathcal{Z}, t \in \mathcal{T}^{interior}\\
	&amp;  \Gamma_{o,z,t} =\Gamma_{o,z,t+\tau^{period}-1} - \frac{1}{\eta_{o,z}^{discharge}}\Theta_{o,z,t} + \eta_{o,z}^{charge}\Pi_{o,z,t} - \eta_{o,z}^{loss}\Gamma_{o,z,t+\tau^{period}-1}  &amp; \forall o \in \mathcal{O}, z \in \mathcal{Z}, t \in \mathcal{T}^{start}
\end{aligned}\]</div><p>When modeling the entire year as a single chronological period with total number of time steps of <span>$\tau^{period}$</span>, storage inventory in the first time step is linked to storage inventory at the last time step of the period representing the year. Alternatively, when modeling the entire year with multiple representative periods, Eq. \ref{eq:SoCBalstart} relates storage inventory in the first timestep of the representative period with the inventory at the last time step of the representative period, where each representative period is made of <span>$\tau^{period}$</span> time steps. In this implementation, energy exchange between representative periods is not permitted. When modeling representative time periods, GenX enables modeling of long duration energy storage which tracks state of charge between representative periods enable energy to be moved throughout the year. If <code>LongDurationStorage=1</code> and <code>OperationWrapping=1</code>, this function calls <code>long_duration_storage()</code> in <code>long_duration_storage.jl</code> to enable this feature.</p><p>The next constraint limits the volume of energy stored at any time, <span>$\Gamma_{o,z,t}$</span>, to be less than the installed energy storage capacity, <span>$\Delta^{total, energy}_{o,z}$</span>. Finally, the maximum discharge rate for storage resources, <span>$\Pi_{o,z,t}$</span>, is constrained to be less than the discharge power capacity, <span>$\Omega_{o,z,t}$</span> or the state of charge at the end of the last period, <span>$\Gamma_{o,z,t-1}$</span>, whichever is lessor.</p><div>\[\begin{aligned}
	&amp;  \Gamma_{o,z,t} \leq \Delta^{total, energy}_{o,z} &amp; \quad \forall o \in \mathcal{O}, z \in \mathcal{Z}, t \in \mathcal{T}\\
	&amp;  \Theta_{o,z,t} \leq \Delta^{total}_{o,z} &amp; \quad \forall o \in \mathcal{O}, z \in \mathcal{Z}, t \in \mathcal{T}\\
	&amp;  \Theta_{o,z,t} \leq \Gamma_{o,z,t-1} &amp; \quad \forall o \in \mathcal{O}, z \in \mathcal{Z}, t \in \mathcal{T}
\end{aligned}\]</div><p>The above constraints are established in <code>storage_all()</code> in <code>storage_all.jl</code>.</p><p>If reserves are modeled, two pairs of proxy variables <span>$f^{charge}_{o,z,t}, f^{discharge}_{o,z,t}$</span> and <span>$r^{charge}_{o,z,t}, r^{discharge}_{o,z,t}$</span> are created for storage resources, to denote the contribution of storage resources to regulation or reserves while charging or discharging, respectively. The total contribution to regulation and reserves, <span>$f_{o,z,t}, r_{o,z,t}$</span> is then the sum of the proxy variables:</p><div>\[\begin{aligned}
	&amp;  f_{o,z,t} = f^{charge}_{o,z,t} + f^{dicharge}_{o,z,t} &amp; \quad \forall o \in \mathcal{O}, z \in \mathcal{Z}, t \in \mathcal{T}\\
	&amp;  r_{o,z,t} = r^{charge}_{o,z,t} + r^{dicharge}_{o,z,t} &amp; \quad \forall o \in \mathcal{O}, z \in \mathcal{Z}, t \in \mathcal{T}
\end{aligned}\]</div><p>The total storage contribution to frequency regulation (<span>$f_{o,z,t}$</span>) and reserves (<span>$r_{o,z,t}$</span>) are each limited specified fraction of installed discharge power capacity (<span>$\upsilon^{reg}_{y,z}, \upsilon^{rsv}_{y,z}$</span>), reflecting the maximum ramp rate for the storage resource in whatever time interval defines the requisite response time for the regulation or reserve products (e.g., 5 mins or 15 mins or 30 mins). These response times differ by system operator and reserve product, and so the user should define these parameters in a self-consistent way for whatever system context they are modeling.</p><div>\[\begin{aligned}
	f_{y,z,t} \leq \upsilon^{reg}_{y,z} \times \Delta^{total}_{y,z}
	\hspace{4 cm}  \forall y \in \mathcal{W}, z \in \mathcal{Z}, t \in \mathcal{T} \\
	r_{y,z, t} \leq \upsilon^{rsv}_{y,z}\times \Delta^{total}_{y,z}
	\hspace{4 cm}  \forall y \in \mathcal{W}, z \in \mathcal{Z}, t \in \mathcal{T}
	\end{aligned}\]</div><p>When charging, reducing the charge rate is contributing to upwards reserve and frequency regulation as it drops net demand. As such, the sum of the charge rate plus contribution to regulation and reserves up must be greater than zero. Additionally, the discharge rate plus the contribution to regulation must be greater than zero.</p><div>\[\begin{aligned}
	&amp;  \Pi_{o,z,t} - f^{charge}_{o,z,t} - r^{charge}_{o,z,t} \geq 0 &amp; \quad \forall o \in \mathcal{O}, z \in \mathcal{Z}, t \in \mathcal{T}\\
	&amp;  \Theta_{o,z,t} - f^{discharge}_{o,z,t} \geq 0 &amp; \quad \forall o \in \mathcal{O}, z \in \mathcal{Z}, t \in \mathcal{T}
\end{aligned}\]</div><p>Additionally, when reserves are modeled, the maximum charge rate and contribution to regulation while charging can be no greater than the available energy storage capacity, or the difference between the total energy storage capacity, <span>$\Delta^{total, energy}_{o,z}$</span>, and the state of charge at the end of the previous time period, <span>$\Gamma_{o,z,t-1}$</span>. Note that for storage to contribute to reserves down while charging, the storage device must be capable of increasing the charge rate (which increase net load).</p><div>\[\begin{aligned}
	&amp;  \Pi_{o,z,t} + f^{charge}_{o,z,t} \leq \Delta^{energy, total}_{o,z} - \Gamma_{o,z,t-1} &amp; \quad \forall o \in \mathcal{O}, z \in \mathcal{Z}, t \in \mathcal{T}
\end{aligned}\]</div><p>Finally, the constraints on maximum discharge rate are replaced by the following, to account for capacity contributed to regulation and reserves:</p><div>\[\begin{aligned}
	&amp;  \Theta_{o,z,t} + f^{discharge}_{o,z,t} + r^{discharge}_{o,z,t} \leq \Delta^{total}_{o,z} &amp; \quad \forall o \in \mathcal{O}, z \in \mathcal{Z}, t \in \mathcal{T}\\
	&amp;  \Theta_{o,z,t} + f^{discharge}_{o,z,t} + r^{discharge}_{o,z,t} \leq \Gamma_{o,z,t-1} &amp; \quad \forall o \in \mathcal{O}, z \in \mathcal{Z}, t \in \mathcal{T}
\end{aligned}\]</div><p>The above reserve related constraints are established by <code>storage_all_reserves()</code> in <code>storage_all.jl</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d7364927a923e2845588ac2e93d130acc5fe9cd0/src/model/resources/storage/storage.jl#L17-L146">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GenX.write_storage-Tuple{AbstractString,AbstractString,Dict,Dict,JuMP.Model}" href="#GenX.write_storage-Tuple{AbstractString,AbstractString,Dict,Dict,JuMP.Model}"><code>GenX.write_storage</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">write_storage(path::AbstractString, sep::AbstractString, inputs::Dict,setup::Dict, EP::Model)</code></pre><p>Function for writing the capacities of different storage technologies, including hydro reservoir, flexible storage tech etc.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d7364927a923e2845588ac2e93d130acc5fe9cd0/src/write_outputs/write_storage.jl#L17-L21">source</a></section></article><h2 id="Investment-Charge-1"><a class="docs-heading-anchor" href="#Investment-Charge-1">Investment Charge</a><a class="docs-heading-anchor-permalink" href="#Investment-Charge-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GenX.investment_charge-Tuple{JuMP.Model,Dict}" href="#GenX.investment_charge-Tuple{JuMP.Model,Dict}"><code>GenX.investment_charge</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">investment_charge(EP::Model, inputs::Dict)</code></pre><p>This function defines the expressions and constraints keeping track of total available storage charge capacity across all resources as well as constraints on capacity retirements. The function also adds investment and fixed O\&amp;M related costs related to charge capacity to the objective function.</p><p>The total capacity of each resource is defined as the sum of the existing capacity plus the newly invested capacity minus any retired capacity (Eq. \ref{eq:totalchargecap}).</p><div>\[\begin{aligned}
&amp; \Delta^{total,charge}_{y,z} =(\overline{\Delta^{charge}_{y,z}}+\Omega^{charge}_{y,z}-\Delta^{charge}_{y,z}) \forall y \in \mathcal{O}^{asym}, z \in \mathcal{Z}
\end{aligned}\]</div><p>One cannot retire more capacity than existing capacity.</p><div>\[\begin{aligned}
&amp;\Delta^{charge}_{y,z} \leq \overline{\Delta^{charge}_{y,z}}
	\hspace{4 cm}  \forall y \in \mathcal{O}^{asym}, z \in \mathcal{Z}
\end{aligned}\]</div><p>For resources where <span>$\overline{\Omega_{y,z}^{charge}}$</span> and <span>$\underline{\Omega_{y,z}^{charge}}$</span> is defined, then we impose constraints on minimum (Eq. \ref{eq:mincap}) and maximum power capacity (Eq. \ref{eq:maxcap}).</p><div>\[\begin{aligned}
&amp; \Delta^{total,charge}_{y,z} \leq \overline{\Omega}^{charge}_{y,z}
	\hspace{4 cm}  \forall y \in \mathcal{O}^{asym}, z \in \mathcal{Z} \\
&amp; \Delta^{total,charge}_{y,z}  \geq \underline{\Omega}^{charge}_{y,z}
	\hspace{4 cm}  \forall y \in \mathcal{O}^{asym}, z \in \mathcal{Z}
\end{aligned}\]</div><p>In addition, this function adds investment and fixed O\&amp;M related costs related to charge capacity to the objective function:</p><div>\[\begin{aligned}
&amp; 	\sum_{y \in \mathcal{O}^{asym} } \sum_{z \in \mathcal{Z}}
	\left( (\pi^{INVEST,charge}_{y,z} \times    \Omega^{charge}_{y,z})
	+ (\pi^{FOM,charge}_{y,z} \times  \Delta^{total,charge}_{y,z})\right)
\end{aligned}\]</div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d7364927a923e2845588ac2e93d130acc5fe9cd0/src/model/resources/storage/investment_charge.jl#L17-L56">source</a></section></article><h2 id="Investment-Energy-1"><a class="docs-heading-anchor" href="#Investment-Energy-1">Investment Energy</a><a class="docs-heading-anchor-permalink" href="#Investment-Energy-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GenX.investment_energy-Tuple{JuMP.Model,Dict}" href="#GenX.investment_energy-Tuple{JuMP.Model,Dict}"><code>GenX.investment_energy</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">investment_energy(EP::Model, inputs::Dict)</code></pre><p>This function defines the expressions and constraints keeping track of total available storage charge capacity across all resources as well as constraints on capacity retirements. The function also adds investment and fixed O\&amp;M related costs related to charge capacity to the objective function.</p><p>The total capacity of each resource is defined as the sum of the existing capacity plus the newly invested capacity minus any retired capacity (Eq. \ref{eq:totalchargecap}).</p><div>\[\begin{aligned}
&amp; \Delta^{total,energy}_{y,z} =(\overline{\Delta^{energy}_{y,z}}+\Omega^{energy}_{y,z}-\Delta^{energy}_{y,z}) \forall y \in \mathcal{O}, z \in \mathcal{Z}
\end{aligned}\]</div><p>One cannot retire more capacity than existing capacity.</p><div>\[\begin{aligned}
&amp;\Delta^{energy}_{y,z} \leq \overline{\Delta^{energy}_{y,z}}
		\hspace{4 cm}  \forall y \in \mathcal{O}, z \in \mathcal{Z}
\end{aligned}\]</div><p>For resources where <span>$\overline{\Omega_{y,z}^{energy}}$</span> and <span>$\underline{\Omega_{y,z}^{energy}}$</span> is defined, then we impose constraints on minimum (Eq. \ref{eq:mincap}) and maximum power capacity (Eq. \ref{eq:maxcap}).</p><div>\[\begin{aligned}
&amp; \Delta^{total,energy}_{y,z} \leq \overline{\Omega}^{energy}_{y,z}
	\hspace{4 cm}  \forall y \in \mathcal{O}, z \in \mathcal{Z} \\
&amp; \Delta^{total,energy}_{y,z}  \geq \underline{\Omega}^{energy}_{y,z}
	\hspace{4 cm}  \forall y \in \mathcal{O}, z \in \mathcal{Z}
\end{aligned}\]</div><p>In addition, this function adds investment and fixed O\&amp;M related costs related to charge capacity to the objective function:</p><div>\[\begin{aligned}
&amp; 	\sum_{y \in \mathcal{O} } \sum_{z \in \mathcal{Z}}
	\left( (\pi^{INVEST,energy}_{y,z} \times    \Omega^{energy}_{y,z})
	+ (\pi^{FOM,energy}_{y,z} \times  \Delta^{total,energy}_{y,z})\right)
\end{aligned}\]</div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d7364927a923e2845588ac2e93d130acc5fe9cd0/src/model/resources/storage/investment_energy.jl#L17-L59">source</a></section></article><h2 id="Long-Duration-Storage-1"><a class="docs-heading-anchor" href="#Long-Duration-Storage-1">Long Duration Storage</a><a class="docs-heading-anchor-permalink" href="#Long-Duration-Storage-1" title="Permalink"></a></h2><h2 id="Storage-All-1"><a class="docs-heading-anchor" href="#Storage-All-1">Storage All</a><a class="docs-heading-anchor-permalink" href="#Storage-All-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GenX.storage_all-Tuple{JuMP.Model,Dict,Int64,Int64,Int64}" href="#GenX.storage_all-Tuple{JuMP.Model,Dict,Int64,Int64,Int64}"><code>GenX.storage_all</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">storage_all(EP::Model, inputs::Dict, Reserves::Int, OperationWrapping::Int, LongDurationStorage::Int)</code></pre><p>Sets up variables and constraints common to all storage resources. See <code>storage()</code> in <code>storage.jl</code> for description of constraints.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d7364927a923e2845588ac2e93d130acc5fe9cd0/src/model/resources/storage/storage_all.jl#L17-L21">source</a></section></article><h2 id="Storage-Asymmetric-1"><a class="docs-heading-anchor" href="#Storage-Asymmetric-1">Storage Asymmetric</a><a class="docs-heading-anchor-permalink" href="#Storage-Asymmetric-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GenX.storage_asymmetric-Tuple{JuMP.Model,Dict,Int64}" href="#GenX.storage_asymmetric-Tuple{JuMP.Model,Dict,Int64}"><code>GenX.storage_asymmetric</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">storage_asymmetric(EP::Model, inputs::Dict, Reserves::Int)</code></pre><p>Sets up variables and constraints specific to storage resources with asymmetric charge and discharge capacities. See <code>storage()</code> in <code>storage.jl</code> for description of constraints.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d7364927a923e2845588ac2e93d130acc5fe9cd0/src/model/resources/storage/storage_asymmetric.jl#L17-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GenX.storage_asymmetric_reserves-Tuple{JuMP.Model,Dict}" href="#GenX.storage_asymmetric_reserves-Tuple{JuMP.Model,Dict}"><code>GenX.storage_asymmetric_reserves</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">storage_asymmetric_reserves(EP::Model, inputs::Dict)</code></pre><p>Sets up variables and constraints specific to storage resources with asymmetric charge and discharge capacities when reserves are modeled. See <code>storage()</code> in <code>storage.jl</code> for description of constraints.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d7364927a923e2845588ac2e93d130acc5fe9cd0/src/model/resources/storage/storage_asymmetric.jl#L48-L52">source</a></section></article><h2 id="Storage-Symmetric-1"><a class="docs-heading-anchor" href="#Storage-Symmetric-1">Storage Symmetric</a><a class="docs-heading-anchor-permalink" href="#Storage-Symmetric-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GenX.storage_symmetric-Tuple{JuMP.Model,Dict,Int64}" href="#GenX.storage_symmetric-Tuple{JuMP.Model,Dict,Int64}"><code>GenX.storage_symmetric</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">storage_symmetric(EP::Model, inputs::Dict, Reserves::Int)</code></pre><p>Sets up variables and constraints specific to storage resources with symmetric charge and discharge capacities. See <code>storage()</code> in <code>storage.jl</code> for description of constraints.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d7364927a923e2845588ac2e93d130acc5fe9cd0/src/model/resources/storage/storage_symmetric.jl#L17-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GenX.storage_symmetric_reserves-Tuple{JuMP.Model,Dict}" href="#GenX.storage_symmetric_reserves-Tuple{JuMP.Model,Dict}"><code>GenX.storage_symmetric_reserves</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">storage_symmetric_reserves(EP::Model, inputs::Dict)</code></pre><p>Sets up variables and constraints specific to storage resources with symmetric charge and discharge capacities when reserves are modeled. See <code>storage()</code> in <code>storage.jl</code> for description of constraints.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d7364927a923e2845588ac2e93d130acc5fe9cd0/src/model/resources/storage/storage_symmetric.jl#L53-L57">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../must_run/">« Must Run</a><a class="docs-footer-nextpage" href="../thermal/">Thermal »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 8 June 2021 00:36">Tuesday 8 June 2021</span>. Using Julia version 1.5.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
